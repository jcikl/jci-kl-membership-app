# 银行交易记录字段说明

## 📋 字段概览

银行交易记录包含以下字段，分为基本信息、分类信息、人员信息和其他信息四大类。

## 🏦 基本信息字段

### 1. 交易日期 (transactionDate)
- **类型**: `string`
- **格式**: `DD-MMM-YYYY` (例如: 15-Jan-2025)
- **必填**: ✅ 是
- **说明**: 交易发生的日期
- **UI显示**: 表格中显示日历图标和日期

### 2. 银行户口 (bankAccountId)
- **类型**: `string`
- **必填**: ✅ 是
- **说明**: 关联的银行户口ID
- **UI显示**: 下拉选择银行户口名称和类型

### 3. 主描述 (mainDescription)
- **类型**: `string`
- **必填**: ✅ 是
- **说明**: 交易的主要描述信息
- **UI显示**: 表格中粗体显示，支持省略号提示

### 4. 副描述 (subDescription)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 交易的补充描述信息
- **UI显示**: 表格中次要文字显示，支持省略号提示

### 5. 支出金额 (expense)
- **类型**: `number`
- **必填**: ❌ 否
- **说明**: 支出金额，默认为0
- **UI显示**: 红色显示，带货币符号RM

### 6. 收入金额 (income)
- **类型**: `number`
- **必填**: ❌ 否
- **说明**: 收入金额，默认为0
- **UI显示**: 绿色显示，带货币符号RM

### 7. 余额 (balance)
- **类型**: `number` (计算字段)
- **说明**: 根据银行户口初始金额和交易记录计算得出
- **UI显示**: 正数绿色，负数红色，粗体显示

## 🏷️ 分类信息字段

### 8. 主要分类 (transactionType)
- **类型**: `string`
- **必填**: ✅ 是
- **说明**: 交易的主要分类ID（0级目录）
- **UI显示**: 紫色标签显示分类名称
- **级联关系**: 影响业务分类和具体用途的选项

### 9. 业务分类 (projectAccount)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 业务分类ID（1级目录）
- **UI显示**: 绿色标签显示分类名称
- **级联关系**: 依赖主要分类，影响具体用途的选项

### 10. 具体用途 (transactionPurpose)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 具体用途ID（2级目录）
- **UI显示**: 蓝色标签显示用途名称，支持层级路径显示
- **级联关系**: 依赖业务分类

## 👥 人员信息字段

### 11. 付款人 (payer)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 付款人信息
- **UI显示**: 普通文本显示

### 12. 收款人 (payee)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 收款人信息
- **UI显示**: 成功色文本显示

### 13. 付款人/收款人 (payerPayee)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 合并的付款人/收款人字段，用于存储会员匹配信息
- **UI显示**: 表单中统一输入框

### 14. 输入人 (inputBy)
- **类型**: `string`
- **必填**: ✅ 是
- **说明**: 记录输入者的用户ID
- **UI显示**: 表单中显示当前用户，禁用编辑

## 📝 其他信息字段

### 15. 户口类型 (accountType)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 银行户口类型

### 16. 付款描述 (paymentDescription)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 付款的详细描述

### 17. 备注 (notes)
- **类型**: `string`
- **必填**: ❌ 否
- **说明**: 交易备注信息
- **UI显示**: 表单中多行文本输入框

### 18. 附件 (attachments)
- **类型**: `string[]`
- **必填**: ❌ 否
- **说明**: 附件URL数组

### 19. 财政年度 (auditYear)
- **类型**: `number`
- **必填**: ✅ 是
- **说明**: 所属财政年度
- **UI显示**: 表单中自动设置为当前财政年度

### 20. 会员费匹配数据 (membershipFeeData)
- **类型**: `MembershipFeeData`
- **必填**: ❌ 否
- **说明**: 会员费匹配相关数据

## 🔧 系统字段

### 21. ID (id)
- **类型**: `string`
- **说明**: 交易记录的唯一标识符
- **生成**: 系统自动生成

### 22. 创建时间 (createdAt)
- **类型**: `string`
- **说明**: 记录创建时间
- **生成**: 系统自动生成

### 23. 更新时间 (updatedAt)
- **类型**: `string`
- **说明**: 记录最后更新时间
- **生成**: 系统自动更新

## 📊 表格显示字段

### 当前表格列顺序
1. **交易日期** - 显示日期和日历图标
2. **主描述** - 粗体显示，支持省略号
3. **副描述** - 次要文字显示
4. **支出** - 红色金额显示
5. **收入** - 绿色金额显示
6. **余额** - 计算字段，正数绿色，负数红色
7. **付款人/收款人** - 合并显示
8. **业务分类** - 绿色标签
9. **交易用途** - 蓝色标签，支持层级路径
10. **主要分类** - 紫色标签
11. **操作** - 编辑、拆分、删除按钮

## 🎯 字段使用场景

### 创建交易记录
- **必填字段**: 交易日期、银行户口、主描述、主要分类、输入人、财政年度
- **可选字段**: 副描述、支出金额、收入金额、业务分类、具体用途、付款人/收款人、备注

### 编辑交易记录
- 所有字段都可以修改
- 级联选择：主要分类 → 业务分类 → 具体用途

### 筛选和搜索
- **文本搜索**: 主描述、副描述、付款人、收款人
- **分类筛选**: 交易用途树形选择
- **日期筛选**: 日期范围选择
- **银行户口筛选**: 按标签页分组

## 🔄 数据关系

### 与银行户口的关系
- 通过 `bankAccountId` 关联银行户口
- 影响余额计算
- 按银行户口分组显示

### 与交易用途的关系
- 通过 `transactionType`、`projectAccount`、`transactionPurpose` 关联3层级交易用途
- 支持级联选择和筛选

### 与拆分记录的关系
- 通过 `id` 关联交易拆分记录
- 支持嵌套显示拆分详情

## 📋 字段验证规则

### 必填验证
- 交易日期、银行户口、主描述、主要分类、输入人、财政年度

### 格式验证
- 交易日期：DD-MMM-YYYY格式
- 金额：数字类型，支持小数点后2位
- 财政年度：数字类型

### 业务验证
- 支出和收入金额不能同时为0
- 级联选择：业务分类依赖主要分类，具体用途依赖业务分类

## 🎨 UI显示特性

### 颜色编码
- **支出**: 红色 (#ff4d4f)
- **收入**: 绿色 (#52c41a)
- **余额**: 正数绿色，负数红色
- **主要分类**: 紫色标签
- **业务分类**: 绿色标签
- **具体用途**: 蓝色标签

### 图标使用
- **交易日期**: CalendarOutlined
- **金额**: DollarOutlined
- **交易用途**: TagOutlined
- **拆分**: SplitCellsOutlined

### 交互特性
- 支持省略号提示
- 支持级联选择
- 支持展开行显示拆分记录
- 支持批量操作

---

**文档版本**: 1.0.0
**更新时间**: 2025年1月
**维护者**: JCI KL 财务管理系统团队
