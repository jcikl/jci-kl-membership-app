# PDF指标解读系统使用指南

## 🎯 功能概述

PDF指标解读系统是一个基于AI的智能工具，能够自动解读JCI奖励指标PDF文件，提取相关信息并生成StandardEditModal所需的表单数据。

## 🚀 主要特性

- **智能PDF解析**: 自动提取PDF文本内容和元数据
- **AI智能解读**: 使用ChatGPT分析PDF内容并生成结构化数据
- **字段自动映射**: 将AI解读结果映射为StandardEditModal字段
- **数据验证**: 自动验证数据完整性和正确性
- **一键保存**: 直接保存到Firebase数据库

## 📋 使用步骤

### 1. 配置ChatGPT API
在 `.env` 文件中添加您的OpenAI API密钥：
```env
VITE_OPENAI_API_KEY=your_openai_api_key_here
```

### 2. 访问PDF解读页面
1. 登录系统后，在侧边栏点击"PDF解读"
2. 或直接访问 `/pdf-interpretation` 页面

### 3. 上传PDF文件
1. 点击或拖拽PDF文件到上传区域
2. 支持最大10MB的PDF文件
3. 系统会自动开始处理流程

### 4. 查看解读结果
系统将按以下步骤处理：
1. **PDF解析**: 提取文本内容和元数据
2. **AI解读**: ChatGPT分析内容并生成结构化数据
3. **字段映射**: 映射为StandardEditModal字段格式
4. **数据验证**: 检查数据完整性和正确性
5. **保存完成**: 写入Firebase数据库

### 5. 确认或编辑数据
- **确认保存**: 如果解读结果满意，点击"确认保存到系统"
- **手动编辑**: 点击"手动编辑"打开StandardEditModal进行修改
- **重新解读**: 如果结果不满意，可以点击"重新解读"

## 🔧 支持的奖项类型

### Efficient Star
- 自动提取序号、指导原则等信息
- 支持基础分数规则和条件设置

### Star Point
- 支持四种类别：Network Star、Experience Star、Social Star、Outreach Star
- 自动提取目标分数和类别信息

### National Area Incentive
- 自动提取国家级和区域级分配信息
- 支持状态设置（开放中/已关闭/已完成）

## 📊 解读结果说明

### 置信度指标
- **高置信度 (≥80%)**: 解读结果质量很高，可以直接使用
- **中等置信度 (60-80%)**: 解读结果较好，建议检查后使用
- **低置信度 (<60%)**: 解读结果可能不准确，建议手动编辑

### 验证结果
- **错误**: 必须修复的问题，如必填字段缺失
- **警告**: 建议改进的问题，如格式不正确

### 提取的关键词
系统会显示从PDF中提取的关键词，帮助判断解读的准确性。

## 🛠️ 技术架构

### 核心服务
- **PDFParseService**: PDF文件解析和文本提取
- **ChatGPTService**: AI智能解读服务
- **FieldMappingService**: 字段映射和数据转换
- **DataValidationService**: 数据验证和修复
- **DatabaseWriteService**: 数据库写入操作

### 数据流程
```
PDF上传 → 文本解析 → AI解读 → 字段映射 → 数据验证 → 数据库保存
```

## 🔒 安全考虑

1. **API密钥安全**: ChatGPT API密钥通过环境变量配置，不会暴露在前端代码中
2. **文件验证**: 严格验证文件类型和大小，防止恶意文件上传
3. **数据清理**: 自动清理undefined值和无效数据
4. **错误处理**: 完善的错误处理和用户提示

## 📝 注意事项

1. **网络连接**: 需要稳定的网络连接访问ChatGPT API
2. **API配额**: 注意OpenAI API的使用配额和费用
3. **文件格式**: 仅支持PDF格式文件
4. **文件大小**: 最大支持10MB的PDF文件
5. **内容质量**: PDF内容质量越高，解读准确度越高

## 🚨 故障排除

### 常见问题

1. **ChatGPT API未配置**
   - 错误：`OpenAI API密钥未配置`
   - 解决：在.env文件中添加VITE_OPENAI_API_KEY

2. **文件格式不支持**
   - 错误：`不支持的文件格式`
   - 解决：确保上传的是PDF文件

3. **文件过大**
   - 错误：`文件大小超过10MB限制`
   - 解决：压缩PDF文件或分割为多个文件

4. **解读失败**
   - 错误：`ChatGPT解读失败`
   - 解决：检查网络连接和API密钥，重试解读

### 调试技巧

1. **查看控制台日志**: 打开浏览器开发者工具查看详细错误信息
2. **检查置信度**: 低置信度结果建议手动编辑
3. **验证关键词**: 检查提取的关键词是否与PDF内容匹配

## 🔄 更新日志

### v1.0.0 (2025-01-10)
- 初始版本发布
- 支持PDF上传和解析
- 集成ChatGPT智能解读
- 实现字段自动映射
- 添加数据验证功能
- 支持三种奖项类型

## 📞 技术支持

如果您在使用过程中遇到问题，请：
1. 查看本文档的故障排除部分
2. 检查控制台错误日志
3. 联系系统管理员获取技术支持

---

**注意**: 本系统需要有效的OpenAI API密钥才能正常工作。请确保您有足够的API配额来使用ChatGPT服务。
