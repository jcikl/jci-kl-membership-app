# RBAC 权限管理系统

## 概述

本系统实现了基于角色的访问控制（RBAC），参考了图片中的权限矩阵设计，将角色管理和权限管理合并为一个统一的界面。

## 功能特性

### 1. 权限矩阵管理 (RolePermissionMatrix.tsx)
- **可视化权限矩阵**：以表格形式展示各角色在不同模块中的权限
- **实时编辑**：支持在线编辑权限设置
- **模块化设计**：按模块分组管理权限（会员管理、活动管理、财务管理、消息通知、个人资料）
- **角色分类**：支持开发者、管理员、会长、秘书长等12种角色

### 2. 权限管理 (RBACPermissions.tsx)
- **权限CRUD**：创建、读取、更新、删除权限
- **权限搜索**：支持按权限名称、键值、模块搜索
- **批量操作**：支持批量删除权限

### 3. 角色绑定 (RBACBindings.tsx)
- **用户角色绑定**：为用户分配角色
- **角色继承**：支持角色继承关系
- **范围控制**：支持角色作用域设置

### 4. 审计日志 (RBACAudit.tsx)
- **操作记录**：记录所有权限相关操作
- **审计追踪**：提供完整的操作历史

## 角色定义

根据图片中的权限矩阵，系统支持以下角色：

### 系统角色
- **开发者**：拥有系统最高权限
- **管理员**：拥有系统管理权限

### 管理职位
- **会长**：分会会长，最高业务权限
- **署理会长**：临时行使会长权限
- **秘书长**：行政事务管理
- **财务长**：财务管理
- **辅导会长**：战略指导角色
- **副会长**：分管特定领域
- **部门主任**：部门管理

### 会员角色
- **正式会员**：正式会员权限
- **准会员**：准会员权限
- **荣誉会员**：荣誉会员权限

## 权限模块

系统按以下模块组织权限：

1. **会员管理**：会员的创建、查看、更新、删除
2. **活动管理**：活动的创建、查看、更新、删除
3. **财务管理**：财务记录的创建、查看、更新、删除
4. **消息通知**：消息的创建、查看、更新、删除
5. **个人资料**：个人资料的创建、查看、更新、删除

## 技术实现

### 类型定义 (types/rbac.ts)
- `PermissionMatrixEntry`：权限矩阵条目
- `RolePermissionMatrix`：角色权限矩阵
- `ROLE_DEFINITIONS`：角色定义常量

### 服务层 (services/rbacService.ts)
- `permissionMatrixService`：权限矩阵服务
- 支持权限矩阵的CRUD操作
- 支持批量更新权限

### 数据层 (data/rbacSeedData.ts)
- 预定义的权限和角色数据
- 根据图片中的权限矩阵初始化数据

## 使用方法

1. 访问 `/rbac-management` 页面
2. 在"权限矩阵"标签页中查看和编辑权限设置
3. 在"权限管理"标签页中管理具体权限
4. 在"角色绑定"标签页中为用户分配角色
5. 在"审计日志"标签页中查看操作历史

## 权限矩阵说明

权限矩阵以表格形式展示，其中：
- 行表示功能（Create、Read、Update、Delete）
- 列表示角色
- 单元格中的开关表示该角色是否有该功能的权限
- 绿色表示有权限，灰色表示无权限

## 注意事项

- 开发者和管理员默认拥有所有权限
- 权限设置会实时保存到数据库
- 所有权限变更都会记录在审计日志中
- 角色继承关系会影响最终的有效权限
